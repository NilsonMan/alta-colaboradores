{% extends "base.html" %}
{% block title %}Alta de Colaboradores{% endblock %}

{% block head %}
<link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.2/dist/css/bootstrap.min.css">
<link rel="stylesheet" href="/static/css/alta.css?v=2.2">
<link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bootstrap-icons@1.11.0/font/bootstrap-icons.css">
<style>
    .flash-message {
        animation: slideIn 0.3s ease-out;
    }
    
    @keyframes slideIn {
        from {
            opacity: 0;
            transform: translateY(-10px);
        }
        to {
            opacity: 1;
            transform: translateY(0);
        }
    }
    
    .pulse {
        animation: pulse 2s infinite;
    }
    
    @keyframes pulse {
        0% {
            box-shadow: 0 0 0 0 rgba(255, 217, 57, 0.7);
        }
        70% {
            box-shadow: 0 0 0 10px rgba(255, 217, 57, 0);
        }
        100% {
            box-shadow: 0 0 0 0 rgba(255, 217, 57, 0);
        }
    }
</style>
{% endblock %}

{% block content %}
<!-- MODAL PREVISUALIZACI√ìN -->
<div class="modal fade" id="modalPreview" tabindex="-1">
    <div class="modal-dialog modal-xl modal-dialog-centered">
        <div class="modal-content">
            <div class="modal-header">
                <h5 class="modal-title">Previsualizaci√≥n del documento</h5>
                <button type="button" class="btn-close" data-bs-dismiss="modal"></button>
            </div>
            <div class="modal-body text-center">
                <iframe id="previewFrame" style="width:100%;height:75vh;border:none;display:none;"></iframe>
                <img id="previewImg" style="max-width:100%;max-height:75vh;display:none;" alt="Previsualizaci√≥n">
                <div id="previewUnsupported" class="d-none">
                    <i class="bi bi-file-earmark-text" style="font-size: 4rem; color: var(--text-light);"></i>
                    <p class="mt-3">Previsualizaci√≥n no disponible para este tipo de archivo</p>
                    <a href="#" id="downloadPreview" class="btn btn-primary mt-2">
                        <i class="bi bi-download me-1"></i>Descargar archivo
                    </a>
                </div>
            </div>
            <div class="modal-footer">
                <button type="button" class="btn btn-secondary" data-bs-dismiss="modal">Cerrar</button>
            </div>
        </div>
    </div>
</div>

<!-- MODAL CORREO (SOLO se muestra al dar clic en confirmar) -->
<div class="modal fade" id="modalCorreo" tabindex="-1">
    <div class="modal-dialog modal-dialog-centered">
        <div class="modal-content">
            <div class="modal-header">
                <h5 class="modal-title">
                    <i class="bi bi-envelope-check me-2"></i>Confirmar Correo
                </h5>
            </div>
            <div class="modal-body text-center py-4">
                <div class="mb-3">
                    <i class="bi bi-shield-check text-primary" style="font-size: 3rem;"></i>
                </div>
                <p class="mb-1">¬øEl correo institucional es correcto?</p>
                <h5 id="correoConfirmacion" class="fw-bold text-primary"></h5>
                <p class="text-warning mt-3">
                    <i class="bi bi-exclamation-triangle me-1"></i>
                    <strong>Importante:</strong> Este correo no podr√° modificarse despu√©s.
                </p>
            </div>
            <div class="modal-footer justify-content-center border-top-0">
                <button type="button" class="btn btn-outline-secondary px-4" id="correoNo">
                    <i class="bi bi-pencil me-1"></i>Corregir
                </button>
                <button type="button" class="btn btn-primary px-4" id="correoSi">
                    <i class="bi bi-check-lg me-1"></i>S√≠, es correcto
                </button>
            </div>
        </div>
    </div>
</div>

<!-- MODAL COLABORADOR REGISTRADO -->
<div class="modal fade" id="modalUsuarioRegistrado" tabindex="-1">
    <div class="modal-dialog modal-dialog-centered modal-lg">
        <div class="modal-content modal-duplicate">
            <div class="modal-header">
                <h5 class="modal-title">
                    <i class="bi bi-person-check-fill me-2"></i>Colaborador Encontrado
                </h5>
                <button type="button" class="btn-close" data-bs-dismiss="modal"></button>
            </div>
            <div class="modal-body">
                <div class="row align-items-center">
                    <div class="col-md-3 text-center">
                        <i class="bi bi-person-badge" style="font-size: 4rem; color: var(--accent);"></i>
                    </div>
                    <div class="col-md-9">
                        <h5 class="text-primary mb-3">Este colaborador ya est√° registrado en el sistema</h5>
                        
                        <div class="alert alert-warning">
                            <i class="bi bi-info-circle me-2"></i>
                            <strong>¬øDeseas continuar con el alta?</strong>
                            <p class="mb-0 mt-1">Si es una nueva contrataci√≥n, puedes proceder con el registro.</p>
                        </div>
                        
                        <div class="duplicate-details mt-3">
                            <h6 class="mb-2">Informaci√≥n del colaborador existente:</h6>
                            <div class="row">
                                <div class="col-md-6">
                                    <p class="mb-1"><strong>Nombre:</strong> <span id="dupNombre">Juan P√©rez</span></p>
                                    <p class="mb-1"><strong>RFC:</strong> <code id="dupRFC">PERJ800101ABC</code></p>
                                </div>
                                <div class="col-md-6">
                                    <p class="mb-1"><strong>Correo:</strong> <span id="dupCorreo">juan.perez@marnezdesarrollos.com</span></p>
                                    <p class="mb-1"><strong>√Årea:</strong> <span id="dupArea">Ventas</span></p>
                                </div>
                            </div>
                            <p class="mt-2 mb-0"><strong>Estado:</strong> <span class="badge bg-success" id="dupEstado">Activo</span></p>
                        </div>
                        
                        <div class="form-check mt-3">
                            <input class="form-check-input" type="checkbox" id="confirmarNuevoRegistro">
                            <label class="form-check-label" for="confirmarNuevoRegistro">
                                Confirmo que este es un nuevo registro para el mismo colaborador
                            </label>
                        </div>
                    </div>
                </div>
            </div>
            <div class="modal-footer">
                <button type="button" class="btn btn-outline-secondary" data-bs-dismiss="modal">
                    <i class="bi bi-x-circle me-1"></i>Cancelar
                </button>
                <button type="button" class="btn btn-primary" id="btnContinuarRegistro">
                    <i class="bi bi-check-circle me-1"></i>Continuar con el Alta
                </button>
            </div>
        </div>
    </div>
</div>

<div class="container py-4">
    <!-- Botones especiales -->
    <div class="row mb-4">
        <div class="col-12">
            <div class="d-flex justify-content-end gap-3">
                <button class="btn btn-baja" id="btnBajaColaborador">
                    <i class="bi bi-person-dash me-1"></i>Baja de Colaboradores
                </button>
                <button class="btn btn-cambio-area" id="btnCambioArea">
                    <i class="bi bi-arrow-left-right me-1"></i>Cambio de √Årea
                </button>
            </div>
        </div>
    </div>
    
    <!-- Mensajes Flash -->
    <div class="flash-messages">
        {% with messages = get_flashed_messages(with_categories=true) %}
            {% if messages %}
                {% for category, message in messages %}
                    <div class="alert alert-{{ 'danger' if category == 'error' else 'success' }} 
                                alert-dismissible fade show flash-message mb-2" 
                         role="alert"
                         style="max-width: 500px;">
                        <div class="d-flex align-items-start">
                            <i class="bi bi-{{ 'exclamation-triangle-fill' if category == 'error' else 'check-circle-fill' }} 
                                      me-2 fs-5"></i>
                            <div class="flex-grow-1">
                                <div class="fw-bold mb-1">
                                    {% if category == 'error' %}
                                        ‚ö†Ô∏è Error de validaci√≥n
                                    {% else %}
                                        ‚úÖ √âxito
                                    {% endif %}
                                </div>
                                <div>{{ message|safe }}</div>
                            </div>
                            <button type="button" class="btn-close ms-2" 
                                    data-bs-dismiss="alert" aria-label="Close"></button>
                        </div>
                    </div>
                {% endfor %}
            {% endif %}
        {% endwith %}
    </div>
    
    <div class="row justify-content-center">
        <div class="col-xl-10">
            <!-- CARD PRINCIPAL -->
            <div class="card shadow-lg">
                <div class="card-body p-4 p-md-5">
                    <!-- T√çTULO Y √ÅREA -->
                    <div class="text-center mb-4">
                        <h2 class="fw-bold mb-3" style="color: #ffd939">
                            <i class="bi bi-person-plus me-2"></i>Alta de Colaborador
                        </h2>
                        <div class="row justify-content-center">
                            <div class="col-md-6">
                                <label class="form-label fw-bold">√Årea del colaborador *</label>
                                <select id="area" class="form-select form-select-lg shadow-sm" required>
                                    <option value="">Selecciona un √°rea</option>
                                    {% for area in areas %}
                                    <option value="{{ area.id }}">{{ area.nombre }}</option>
                                    {% endfor %}
                                </select>
                            </div>
                        </div>
                    </div>

                    <!-- FORMULARIO PRINCIPAL -->
                    <form id="formulario" class="d-none" method="POST" enctype="multipart/form-data">
                        <input type="hidden" name="area" id="areaHidden">

                        <!-- SECCI√ìN 1: DATOS PERSONALES -->
                        <div class="section-card">
                            <div class="section-toggle" data-target="personalData">
                                <h4 class="mb-0 fw-bold">
                                    <i class="bi bi-person-circle me-2"></i>Datos Personales
                                </h4>
                                <i class="bi bi-chevron-down toggle-icon"></i>
                            </div>
                            <div id="personalData" class="section-content">
                                <div class="row g-3">
                                    <div class="col-md-6">
                                        <label class="form-label fw-semibold">Nombre *</label>
                                        <input id="nombre" name="nombre" class="form-control" required 
                                               autocomplete="given-name"
                                               placeholder="Escribe el nombre">
                                    </div>
                                    <div class="col-md-6">
                                        <label class="form-label fw-semibold">Apellido *</label>
                                        <input id="apellido" name="apellido" class="form-control" required 
                                               autocomplete="family-name"
                                               placeholder="Escribe el apellido">
                                    </div>
                                </div>

                                <div class="row g-3 mt-2">
                                    <div class="col-md-8">
                                        <label class="form-label fw-semibold">Correo institucional *</label>
                                        <div class="input-group">
                                            <input id="correo" name="correo" class="form-control" required 
                                                   type="email" autocomplete="email"
                                                   placeholder="Se generar√° autom√°ticamente">
                                            <button type="button" id="btnConfirmarCorreo" class="btn btn-primary d-none">
                                                <i class="bi bi-check-circle me-1"></i>Confirmar
                                            </button>
                                        </div>
                                        <div id="estadoCorreo" class="form-text">
                                            <i class="bi bi-clock-history me-1"></i>Pendiente de confirmaci√≥n
                                        </div>
                                    </div>
                                    <div class="col-md-4">
                                        <label class="form-label fw-semibold">Edad</label>
                                        <input type="number" name="edad" class="form-control" min="18" max="70" 
                                               autocomplete="off" placeholder="Ej: 25">
                                    </div>
                                </div>

                                <div class="row g-3 mt-2">
                                    <div class="col-md-4">
                                        <label class="form-label fw-semibold">Estado civil</label>
                                        <select name="estado_civil" class="form-select" autocomplete="off">
                                            <option value="">Seleccione</option>
                                            <option>Soltero(a)</option>
                                            <option>Casado(a)</option>
                                            <option>Divorciado(a)</option>
                                            <option>Viudo(a)</option>
                                        </select>
                                    </div>
                                    <div class="col-md-4">
                                        <label class="form-label fw-semibold">Tel√©fono *</label>
                                        <input name="telefono" class="form-control" type="tel" 
                                               pattern="[0-9]{10}" maxlength="10" minlength="10"
                                               placeholder="10 d√≠gitos" required autocomplete="tel">
                                    </div>
                                    <div class="col-md-4">
                                        <label class="form-label fw-semibold">RFC *</label>
                                        <input name="rfc" class="form-control text-uppercase" maxlength="13"
                                               placeholder="RFC (13 caracteres)"
                                               required autocomplete="off">
                                        <div class="form-text">M√°ximo 13 caracteres</div>
                                    </div>
                                </div>

                                <div class="row g-3 mt-2">
                                    <div class="col-md-6">
                                        <label class="form-label fw-semibold">Domicilio</label>
                                        <textarea name="domicilio" class="form-control" rows="2"
                                                  autocomplete="street-address" placeholder="Calle, n√∫mero, colonia, ciudad"></textarea>
                                    </div>
                                    <div class="col-md-3">
                                        <label class="form-label fw-semibold">CURP *</label>
                                        <input name="curp" id="curp" class="form-control text-uppercase" 
                                               maxlength="18" minlength="18" required
                                               autocomplete="off" placeholder="18 caracteres">
                                    </div>
                                    <div class="col-md-3">
                                        <label class="form-label fw-semibold">NSS *</label>
                                        <input name="nss" class="form-control" pattern="[0-9]{11}" maxlength="11" minlength="11"
                                               placeholder="11 d√≠gitos" required autocomplete="off">
                                    </div>
                                </div>
                            </div>
                        </div>

                        <!-- SECCI√ìN 2: INFORMACI√ìN LABORAL -->
                        <div class="section-card">
                            <div class="section-toggle" data-target="laboralData">
                                <h4 class="mb-0 fw-bold">
                                    <i class="bi bi-briefcase me-2"></i>Informaci√≥n Laboral
                                </h4>
                                <i class="bi bi-chevron-down toggle-icon"></i>
                            </div>
                            <div id="laboralData" class="section-content">
                                <div class="row g-3">
                                    <div class="col-md-4">
                                        <label class="form-label fw-semibold">Fecha de alta *</label>
                                        <input type="date" name="fecha_alta" class="form-control" required 
                                               max="{{ today }}" autocomplete="off">
                                    </div>
                                    <div class="col-md-4">
                                        <label class="form-label fw-semibold" id="labelPuesto">Puesto *</label>
                                        <select id="puesto" name="puesto" class="form-select">
                                            <option value="">Seleccione un puesto</option>
                                        </select>
                                        <select id="rol_comercial" name="rol_comercial" class="form-select d-none">
                                            <option value="">Seleccione un rol comercial</option>
                                            <option value="Asesor Diamante">Asesor Diamante</option>
                                            <option value="Asesor Externo">Asesor Externo</option>
                                            <option value="Asesor Interno">Asesor Interno</option>
                                            <option value="Inmobiliaria">Inmobiliaria</option>
                                            <option value="Inmobiliaria Premium">Inmobiliaria Premium</option>
                                        </select>
                                    </div>
                                    <div class="col-md-4">
                                        <label class="form-label fw-semibold" id="labelSueldo">Sueldo</label>
                                        <div class="input-group">
                                            <span class="input-group-text">$</span>
                                            <input id="sueldo" type="number" name="sueldo" class="form-control" 
                                                   min="0" step="0.01" placeholder="0.00">
                                        </div>
                                    </div>
                                </div>

                                <div class="row g-3 mt-2">
                                    <div class="col-md-4">
                                        <label class="form-label fw-semibold">Reclutador(es)</label>
                                        <select name="reclutador" class="form-select" autocomplete="off">
                                            <option value="">Seleccione</option>
                                            {% for r in reclutadores %}
                                            <option value="{{ r.id }}">{{ r.nombre }}</option>
                                            {% endfor %}
                                        </select>
                                    </div>
                                    <div class="col-md-4">
                                        <label class="form-label fw-semibold">M√©todo de pago *</label>
                                        <select name="metodo_pago" class="form-select" required autocomplete="off">
                                            <option value="">Seleccione</option>
                                            {% for m in metodos_pago %}
                                            <option value="{{ m.id }}">{{ m.nombre }}</option>
                                            {% endfor %}
                                        </select>
                                    </div>
                                    <div class="col-md-4">
                                        <label class="form-label fw-semibold">Banco *</label>
                                        <select id="banco" name="banco" class="form-select" autocomplete="off">
                                            <option value="">Seleccione</option>
                                            {% for b in bancos %}
                                            <option value="{{ b.id }}">{{ b.nombre }}</option>
                                            {% endfor %}
                                        </select>
                                    </div>
                                </div>

                                <div class="row g-3 mt-2">
                                    <div class="col-md-8">
                                        <label class="form-label fw-semibold">N√∫mero de cuenta *</label>
                                        <input id="numero_cuenta" name="numero_cuenta" class="form-control"
                                               pattern="[0-9]{16,18}" minlength="16" maxlength="18"
                                               placeholder="16 o 18 d√≠gitos" required autocomplete="cc-number">
                                        <div class="form-text">Ingresa los 16 o 18 d√≠gitos de tu cuenta bancaria</div>
                                    </div>
                                </div>
                            </div>
                        </div>

                        <!-- SECCI√ìN 3: CR√âDITOS -->
                        <div class="section-card">
                            <div class="section-toggle" data-target="creditosData">
                                <h4 class="mb-0 fw-bold">
                                    <i class="bi bi-cash-stack me-2"></i>Cr√©ditos
                                </h4>
                                <i class="bi bi-chevron-down toggle-icon"></i>
                            </div>
                            <div id="creditosData" class="section-content">
                                <div class="row g-3">
                                    <div class="col-md-6">
                                        <label class="form-label fw-semibold">¬øTiene Infonavit?</label>
                                        <select name="infonavit" class="form-select" onchange="toggleCredito('infonavit')">
                                            <option>No</option>
                                            <option>S√≠</option>
                                        </select>
                                        <div class="mt-2">
                                            <input id="infonavit_credito" name="infonavit_credito" 
                                                   class="form-control d-none" autocomplete="off"
                                                   placeholder="N√∫mero de cr√©dito Infonavit">
                                        </div>
                                    </div>
                                    <div class="col-md-6">
                                        <label class="form-label fw-semibold">¬øTiene Fonacot?</label>
                                        <select name="fonacot" class="form-select" onchange="toggleCredito('fonacot')">
                                            <option>No</option>
                                            <option>S√≠</option>
                                        </select>
                                        <div class="mt-2">
                                            <input id="fonacot_credito" name="fonacot_credito" 
                                                   class="form-control d-none" autocomplete="off"
                                                   placeholder="N√∫mero de cr√©dito Fonacot">
                                        </div>
                                    </div>
                                </div>
                            </div>
                        </div>

                        <!-- SECCI√ìN 4: DOCUMENTACI√ìN -->
                        <div class="section-card">
                            <div class="section-toggle" data-target="documentosData">
                                <h4 class="mb-0 fw-bold">
                                    <i class="bi bi-files me-2"></i>Documentaci√≥n Requerida
                                </h4>
                                <i class="bi bi-chevron-down toggle-icon"></i>
                            </div>
                            <div id="documentosData" class="section-content">
                                <div class="alert alert-info mb-3">
                                    <i class="bi bi-info-circle me-2"></i>
                                    Arrastra o selecciona archivos (PDF, JPG, PNG) m√°ximo 10MB cada uno
                                </div>
                                
                                <div class="doc-grid">
                                    {% for d in ["Constancia fiscal","CURP","INE","RFC","NSS","Comprobante domicilio","Comprobante estudios","Carta 1","Carta 2"] %}
                                    <div class="doc-card">
                                        <div class="doc-inner">
                                            <div class="doc-face doc-front">
                                                <div class="doc-icon">üìÑ</div>
                                                <div class="doc-title">{{ d }}</div>
                                                <div class="doc-hint">Haz clic o arrastra</div>
                                                <input type="file" name="documentos[]" 
                                                       accept=".pdf,.jpg,.jpeg,.png" 
                                                       data-max-size="10485760"
                                                       data-doc-name="{{ d }}">
                                            </div>
                                            <div class="doc-face doc-back">
                                                <div class="status">‚úÖ Cargado</div>
                                                <div class="doc-file-name small text-truncate mt-1" style="max-width: 150px;"></div>
                                                <div class="d-flex gap-2 mt-2">
                                                    <button type="button" class="btn btn-sm btn-outline-primary"
                                                            onclick="previsualizarDocumento(this)">
                                                        <i class="bi bi-eye"></i> Ver
                                                    </button>
                                                    <button type="button" class="btn btn-sm btn-outline-secondary"
                                                            onclick="cambiarDocumento(this)">
                                                        <i class="bi bi-arrow-clockwise"></i> Cambiar
                                                    </button>
                                                </div>
                                            </div>
                                        </div>
                                    </div>
                                    {% endfor %}
                                </div>
                                
                                <div class="mt-3 text-center">
                                    <div id="progressContainer" class="progress-container">
                                        <div class="progress-wrapper">
                                            <div class="progress-bar-container">
                                                <div id="uploadProgress" class="progress-bar"></div>
                                            </div>
                                            <div class="progress-percentage" id="progressPercentage">0%</div>
                                        </div>
                                        <div class="progress-text">
                                            <span id="uploadStatus">0 de 9 documentos cargados</span>
                                        </div>
                                    </div>
                                </div>
                            </div>
                        </div>

                        <!-- SECCI√ìN 5: RECURSOS -->
                        <div class="section-card">
                            <div class="section-toggle" data-target="recursosData">
                                <h4 class="mb-0 fw-bold">
                                    <i class="bi bi-laptop me-2"></i>Equipo y Programas
                                </h4>
                                <i class="bi bi-chevron-down toggle-icon"></i>
                            </div>
                            <div id="recursosData" class="section-content">
                                <div class="row">
                                    <div class="col-md-6">
                                        <h6 class="fw-bold mb-3">Equipo electr√≥nico</h6>
                                        <div class="box">
                                            {% for r in recursos %}
                                            <div class="form-check mb-2">
                                                <input class="form-check-input" type="checkbox" 
                                                       name="equipo[]" value="{{ r.id }}" id="recurso_{{ r.id }}">
                                                <label class="form-check-label" for="recurso_{{ r.id }}">
                                                    {{ r.nombre }}
                                                </label>
                                            </div>
                                            {% endfor %}
                                        </div>
                                    </div>
                                    <div class="col-md-6">
                                        <h6 class="fw-bold mb-3">Programas</h6>
                                        <div class="box">
                                            {% for p in programas %}
                                            <div class="form-check mb-2">
                                                <input class="form-check-input" type="checkbox" 
                                                       name="programas[]" value="{{ p.id }}" id="programa_{{ p.id }}">
                                                <label class="form-check-label" for="programa_{{ p.id }}">
                                                    {{ p.nombre }}
                                                </label>
                                            </div>
                                            {% endfor %}
                                        </div>
                                    </div>
                                </div>
                            </div>
                        </div>

                        <!-- SECCI√ìN 6: COMENTARIOS -->
                        <div class="section-card">
                            <div class="section-toggle" data-target="comentariosData">
                                <h4 class="mb-0 fw-bold">
                                    <i class="bi bi-chat-left-text me-2"></i>Comentarios Adicionales
                                </h4>
                                <i class="bi bi-chevron-down toggle-icon"></i>
                            </div>
                            <div id="comentariosData" class="section-content">
                                <textarea name="comentarios" class="form-control" rows="3" 
                                          maxlength="500" placeholder="Observaciones, notas o comentarios adicionales..."></textarea>
                                <div class="form-text text-end">
                                    <span id="charCount">0</span>/500 caracteres
                                </div>
                            </div>
                        </div>

                        <!-- BOT√ìN DE ENV√çO -->
                        <div class="text-center mt-4 pt-3 border-top">
                            <button type="submit" class="btn btn-primary btn-lg px-5 py-3 fw-bold">
                                <i class="bi bi-save me-2"></i>Guardar Colaborador
                            </button>
                            <div class="mt-2">
                                <small class="text-muted">* Campos obligatorios</small>
                            </div>
                        </div>
                    </form>
                </div>
            </div>
        </div>
    </div>
</div>
{% endblock %}

{% block scripts %}
<script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.2/dist/js/bootstrap.bundle.min.js"></script>
<script src="/static/js/alta.js?v=2.3"></script>

<script>
// Configuraci√≥n global
window.APP_CONFIG = {
    dominioCorreo: '@marnezdesarrollos.com',
    AREA_COMERCIAL_ID: 2,
    MAX_FILE_SIZE: 10485760,
    today: new Date().toISOString().split('T')[0]
};

window.VALIDATION_REGEX = {
    curp: /^[A-Z]{4}\d{6}[HM][A-Z]{5}[A-Z\d]{2}$/,
    email: /^[^\s@]+@marnezdesarrollos\.com$/i
};

// Auto-eliminar mensajes flash
setTimeout(() => {
    document.querySelectorAll('.flash-message').forEach(alert => {
        const bsAlert = new bootstrap.Alert(alert);
        bsAlert.close();
    });
}, 5000);

// Auto-focus en el √°rea select
document.addEventListener('DOMContentLoaded', function() {
    const areaSelect = document.getElementById('area');
    if (areaSelect && areaSelect.value === '') {
        areaSelect.focus();
    }
});
</script>
{% endblock %}